{"ast":null,"code":"import { HttpClient } from '@angular/common/http';\nimport { IConfig, IPartner, IRegister } from '@app/@shared/model';\nimport { environment } from '@env/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ParnerService = /*#__PURE__*/(() => {\n  class ParnerService {\n    constructor(http) {\n      var _a, _b, _c;\n\n      this.http = http;\n      this.apiUrl = environment.apiUrl;\n      this.configList = [];\n      this.baseUrlConfig = 'https://blockchain-contract-manager-default-rtdb.firebaseio.com/config.json';\n      const jsonData = JSON.parse(localStorage.getItem('partnerList'));\n\n      if (jsonData) {\n        this.url1 = (_a = jsonData[0]) === null || _a === void 0 ? void 0 : _a.url;\n        this.url2 = (_b = jsonData[1]) === null || _b === void 0 ? void 0 : _b.url;\n        this.url3 = (_c = jsonData[2]) === null || _c === void 0 ? void 0 : _c.url;\n      }\n\n      this.partnerList().subscribe(data => {\n        this.configList = data;\n\n        for (var i in this.configList) {\n          if (this.configList[i].parametro == '1') {\n            this.url1 = this.configList[i].url;\n          }\n\n          if (this.configList[i].parametro == '2') {\n            this.url2 = this.configList[i].url;\n          }\n\n          if (this.configList[i].parametro == '3') {\n            this.url3 = this.configList[i].url;\n          }\n        }\n      });\n    }\n\n    login(loginPayload) {\n      return this.http.post('http://localhost:8080/' + 'token/generate-token', loginPayload);\n    }\n\n    partnerList() {\n      return this.http.get(this.baseUrlConfig);\n    }\n\n    setConfig(config) {\n      return this.http.put(this.baseUrlConfig, config);\n    }\n\n    getRegisters() {\n      this.empresaLogada = window.localStorage.getItem('empresaLogada');\n      const jsonData = JSON.parse(window.localStorage.getItem('parnerList'));\n      console.log('getRegisters', this.empresaLogada);\n      console.log('getRegisters', jsonData);\n\n      if (this.empresaLogada === '1') {\n        return this.http.get(jsonData[0].url + '/my-batches');\n      }\n\n      if (this.empresaLogada === '2') {\n        return this.http.get(jsonData[1].url + '/my-batches');\n      }\n\n      if (this.empresaLogada === '3') {\n        return this.http.get(jsonData[2].url + '/my-batches');\n      }\n    }\n\n    getAllRegisters() {\n      return this.http.get(`${this.apiUrl}/my-batches`);\n    }\n\n    getRegisterById(id) {\n      this.empresaLogada = window.localStorage.getItem('empresaLogada');\n      const jsonData = JSON.parse(window.localStorage.getItem('parnerList'));\n\n      if (this.empresaLogada === '1') {\n        return this.http.get(jsonData[0].url + '/register/' + id);\n      }\n\n      if (this.empresaLogada === '2') {\n        return this.http.get(jsonData[1].url + '/register/' + id);\n      }\n\n      if (this.empresaLogada === '3') {\n        return this.http.get(jsonData[2].url + '/register/' + id);\n      }\n    }\n\n    getRegisterHistById(id) {\n      this.empresaLogada = window.localStorage.getItem('empresaLogada');\n      const jsonData = JSON.parse(window.localStorage.getItem('parnerList'));\n\n      if (this.empresaLogada === '1') {\n        return this.http.get(jsonData[0].url + '/register/history/' + id);\n      }\n\n      if (this.empresaLogada === '2') {\n        return this.http.get(jsonData[1].url + '/register/history/' + id);\n      }\n\n      if (this.empresaLogada === '3') {\n        return this.http.get(jsonData[2].url + '/register/history/' + id);\n      }\n    }\n\n    createRegister(parceiro, register) {\n      this.empresaLogada = window.localStorage.getItem('empresaLogada');\n      const jsonData = JSON.parse(window.localStorage.getItem('parnerList'));\n      console.log({\n        register\n      });\n\n      if (this.empresaLogada === '1') {\n        if (parceiro === 'Decolar') {\n          return this.http.post(jsonData[0].url + '/register/CN=PartyB,O=PartyB,L=Boston,C=US', register);\n        } else {\n          return this.http.post(jsonData[0].url + '/register/CN=PartyC,O=PartyC,L=Boston,C=US', register);\n        }\n      }\n\n      if (this.empresaLogada === '2') {\n        return this.http.post(jsonData[1].url + '/register/CN=PartyA,O=PartyA,L=Boston,C=US', register);\n      } else {\n        return this.http.post(jsonData[2].url + '/register/CN=PartyA,O=PartyA,L=Boston,C=US', register);\n      }\n    }\n\n    updateRegister(parceiro, empresa, register) {\n      if (empresa === '1') {\n        if (parceiro === 'Decolar') {\n          //todo mudar pra B\n          return this.http.post(window.localStorage.getItem('apiBaseUrlA') + '/O=PartyB,L=New York,C=US', register);\n        } else {\n          return this.http.post(window.localStorage.getItem('apiBaseUrlA') + '/O=PartyC,L=Boston,C=US', register);\n        }\n      }\n\n      if (empresa === '2') {\n        return this.http.post(window.localStorage.getItem('apiBaseUrlB') + '/O=PartyA,L=London,C=GB', register);\n      }\n\n      if (empresa === '3') {\n        return this.http.post(window.localStorage.getItem('apiBaseUrlC') + '/O=PartyA,L=London,C=GB', register);\n      }\n    }\n\n    uploadFile(file) {\n      const data = new FormData();\n      data.append('file', file, file.name);\n      data.append('name', 'Paulo Henrique');\n      data.append('user', 'test');\n      data.append('email', 'email@email.com');\n      return this.http.post('http://34.125.56.61:3000/signDocument', data, {\n        reportProgress: true\n      });\n    }\n\n    getSummary() {\n      this.empresaLogada = window.localStorage.getItem('empresaLogada');\n      const jsonData = JSON.parse(window.localStorage.getItem('parnerList'));\n      console.log('getSummaryyyy');\n\n      if (jsonData) {\n        console.log('empresaLogada', this.empresaLogada);\n        console.log('jsonData', jsonData);\n\n        if (this.empresaLogada === '1') {\n          return this.http.get(jsonData[0].url + '/dashboard/');\n        }\n\n        if (this.empresaLogada === '2') {\n          return this.http.get(jsonData[1].url + '/dashboard/');\n        }\n\n        if (this.empresaLogada === '3') {\n          return this.http.get(jsonData[2].url + '/dashboard/');\n        }\n      }\n    }\n\n  }\n\n  ParnerService.ɵfac = function ParnerService_Factory(t) {\n    return new (t || ParnerService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  ParnerService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ParnerService,\n    factory: ParnerService.ɵfac,\n    providedIn: 'root'\n  });\n  return ParnerService;\n})();","map":null,"metadata":{},"sourceType":"module"}