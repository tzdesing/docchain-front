{"ast":null,"code":"var _a, _b;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { MatSort } from '@angular/material/sort';\nimport { ParnerService } from '@app/@shared/services/partner/partner.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { DialogCertificationFileComponent } from './dialog-certification-file/dialog-certification-file';\nlet HomeComponent = class HomeComponent {\n  constructor(parnerService, dialog) {\n    this.parnerService = parnerService;\n    this.dialog = dialog;\n    this.contractList = [];\n    this.parsedList = [];\n    this.isLoading = false;\n    this.dashboard = {};\n    this.chart = {\n      title: '',\n      type: 'BarChart',\n      columnNames: ['City', 'Inhabitants'],\n      data: [['Jan', 56], ['Fev', 1256], ['Mar', 658], ['Abr', 852], ['Mai', 2200]],\n      options: {\n        title: '',\n        legend: {\n          position: 'none'\n        },\n        chart: {\n          title: 'Chess opening moves',\n          subtitle: 'popularity by percentage'\n        },\n        bars: 'horizontal',\n        axes: {\n          x: {\n            0: {\n              side: 'top',\n              label: 'Percentage'\n            } // Top x-axis.\n\n          }\n        },\n        bar: {\n          groupWidth: '90%'\n        }\n      }\n    };\n    this.displayedColumns = ['id', 'veiculo', 'checkin', 'checkout', 'diaria', 'vlr_diaria', 'total', 'parceiro', 'status']; // signturesDataMock;\n\n    this.displayColumnsSigntures = ['contract', 'name', 'action'];\n    this.parnerService.getSummary().subscribe(data => this.dashboard = data);\n    this.parnerService.getRegisters().subscribe(data => {\n      this.contractList = data;\n\n      for (var i in this.contractList) {\n        var obj = JSON.parse(this.contractList[i].payload);\n        this.parsedList.push({\n          id: this.contractList[i].id,\n          veiculo: obj.veiculo,\n          checkin: obj.checkin,\n          checkout: obj.checkout,\n          diaria: obj.diaria,\n          vlr_diaria: obj.vlr_diaria,\n          total: obj.total,\n          parceiro: obj.parceiro,\n          status: obj.status\n        }); //if (this.contractList[i].parametro == \"1\") {\n        //  this.url1 = this.configList[i].url;\n        //}\n      }\n\n      const contracts = this.parsedList; //todo truncar pra ficar 10 no max\n\n      this.dataSource = new MatTableDataSource(contracts);\n    });\n  }\n\n  ngOnInit() {\n    //this.dashboardService.info().subscribe(v => this.dashboard = v);\n    console.log('ngOninit');\n    this.getPendingSigntures();\n  }\n\n  applyFilter(event) {\n    const filterValue = event.target.value;\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n  }\n\n  signContract(element) {\n    const dialogRef = this.dialog.open(DialogCertificationFileComponent, {\n      width: '450px',\n      data: {\n        element\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      console.log('The dialog was closed');\n    });\n  }\n\n  getPendingSigntures() {\n    const list = [{\n      contract: 'Contrato #001',\n      name: 'Mary',\n      showAction: true,\n      signed: false\n    }, {\n      contract: 'Contrato #001',\n      name: 'Bob',\n      showAction: false,\n      signed: false\n    }, {\n      contract: 'Contrato #001',\n      name: 'John',\n      showAction: false,\n      signed: true\n    }];\n    console.log('list', list);\n    this.dataSourceSigntures = new MatTableDataSource(list);\n  }\n\n};\n\n__decorate([ViewChild(MatSort), __metadata(\"design:type\", typeof (_a = typeof MatSort !== \"undefined\" && MatSort) === \"function\" ? _a : Object)], HomeComponent.prototype, \"sort\", void 0);\n\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n}), __metadata(\"design:paramtypes\", [ParnerService, typeof (_b = typeof MatDialog !== \"undefined\" && MatDialog) === \"function\" ? _b : Object])], HomeComponent);\nexport { HomeComponent };","map":null,"metadata":{},"sourceType":"module"}