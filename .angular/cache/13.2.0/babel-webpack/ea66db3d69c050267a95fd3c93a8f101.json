{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { FormBuilder, FormControl, NgForm, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { v4 as uuid } from 'uuid';\nimport { Router } from '@angular/router';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { SignatureContact } from '@app/@shared/model';\nimport { ParnerService } from '@app/@shared/services/partner/partner.service';\nimport { StatusService } from '@app/@shared/services/status/status.service';\nimport { ContractService } from '@app/@shared/services/contract/contract.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/@shared/services/contract/contract.service\";\nimport * as i2 from \"@app/@shared/services/status/status.service\";\nimport * as i3 from \"@app/@shared/services/partner/partner.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\nconst _c0 = [\"uploadFile\"];\nconst _c1 = [\"signatureNameInput\"];\nconst _c2 = [\"contactForm\"];\n\nfunction ContractFormComponent_mat_option_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const parner_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", parner_r9.nome);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(parner_r9.nome);\n  }\n}\n\nfunction ContractFormComponent_mat_option_112_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 41);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const status_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", status_r10.key);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(status_r10.value);\n  }\n}\n\nfunction ContractFormComponent_div_185_th_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 50);\n    i0.ɵɵtext(1, \"Nome\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ContractFormComponent_div_185_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r19.name);\n  }\n}\n\nfunction ContractFormComponent_div_185_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 50);\n    i0.ɵɵtext(1, \"E-mail\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ContractFormComponent_div_185_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 51);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r20.email);\n  }\n}\n\nfunction ContractFormComponent_div_185_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 50);\n  }\n}\n\nfunction ContractFormComponent_div_185_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 51);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_div_185_td_22_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const element_r21 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.removeSignture(element_r21);\n    });\n    i0.ɵɵtext(3, \"\\n                  \");\n    i0.ɵɵelementStart(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n              \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ContractFormComponent_div_185_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 53);\n  }\n}\n\nfunction ContractFormComponent_div_185_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 54);\n  }\n}\n\nfunction ContractFormComponent_div_185_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"table\", 42);\n    i0.ɵɵtext(3, \"\\n            \");\n    i0.ɵɵelementContainerStart(4, 43);\n    i0.ɵɵtext(5, \"\\n              \");\n    i0.ɵɵtemplate(6, ContractFormComponent_div_185_th_6_Template, 2, 0, \"th\", 44);\n    i0.ɵɵtext(7, \"\\n              \");\n    i0.ɵɵtemplate(8, ContractFormComponent_div_185_td_8_Template, 2, 1, \"td\", 45);\n    i0.ɵɵtext(9, \"\\n            \");\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementContainerStart(11, 46);\n    i0.ɵɵtext(12, \"\\n              \");\n    i0.ɵɵtemplate(13, ContractFormComponent_div_185_th_13_Template, 2, 0, \"th\", 44);\n    i0.ɵɵtext(14, \"\\n              \");\n    i0.ɵɵtemplate(15, ContractFormComponent_div_185_td_15_Template, 2, 1, \"td\", 45);\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtext(17, \"\\n            \");\n    i0.ɵɵelementContainerStart(18, 47);\n    i0.ɵɵtext(19, \"\\n              \");\n    i0.ɵɵtemplate(20, ContractFormComponent_div_185_th_20_Template, 1, 0, \"th\", 44);\n    i0.ɵɵtext(21, \"\\n              \");\n    i0.ɵɵtemplate(22, ContractFormComponent_div_185_td_22_Template, 8, 0, \"td\", 45);\n    i0.ɵɵtext(23, \"\\n            \");\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtext(24, \"\\n\\n            \");\n    i0.ɵɵtemplate(25, ContractFormComponent_div_185_tr_25_Template, 1, 0, \"tr\", 48);\n    i0.ɵɵtext(26, \"\\n            \");\n    i0.ɵɵtemplate(27, ContractFormComponent_div_185_tr_27_Template, 1, 0, \"tr\", 49);\n    i0.ɵɵtext(28, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"dataSource\", ctx_r7.dataSource);\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r7.displayedColumns);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r7.displayedColumns);\n  }\n}\n\nfunction ContractFormComponent_div_210_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 1);\n    i0.ɵɵtext(3, \"Historico de atualiza\\u00E7\\u00F5es\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n    \");\n    i0.ɵɵelement(5, \"app-timeline\", 56);\n    i0.ɵɵtext(6, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"data\", ctx_r8.contractListHist);\n  }\n}\n\nconst _c3 = function () {\n  return [\"/page/contract\"];\n};\n\nexport let ContractFormComponent = /*#__PURE__*/(() => {\n  class ContractFormComponent {\n    constructor(contractService, statusService, parnerService, formBulder, route, router) {\n      this.contractService = contractService;\n      this.statusService = statusService;\n      this.parnerService = parnerService;\n      this.formBulder = formBulder;\n      this.route = route;\n      this.router = router;\n      this.pageTitle = 'Novo contrato'; // public fileName: string;\n\n      this.contractListHist = [];\n      this.file = new FormData();\n      this.loading = false;\n      this.fileName = 'Selecione o documento';\n      this.register = null;\n      this.displayedColumns = ['name', 'email', 'action'];\n      this.listSignatures = [];\n      this.contactSignatureModel = new SignatureContact('', '');\n      this.pageForm = this.formBulder.group({\n        veiculo: new FormControl('1', [Validators.required]),\n        checkin: new FormControl('2021-09-06', [Validators.required]),\n        checkout: new FormControl('2021-09-09', [Validators.required]),\n        diaria: new FormControl('1', [Validators.required]),\n        vlr_diaria: new FormControl('2', [Validators.required]),\n        file: new FormControl(''),\n        attachments: new FormControl(''),\n        descricaoDocumento: new FormControl(''),\n        total: new FormControl('3', [Validators.required]),\n        parceiro: new FormControl('Latam', [Validators.required]),\n        status: new FormControl('AE', [Validators.required]),\n        listaAssinaturas: new FormControl(undefined)\n      });\n    }\n\n    ngOnInit() {\n      this.statusService.list().subscribe(v => this.statusList = v);\n      this.parnerService.partnerList().subscribe(v => this.parnerList = v);\n      this.route.params.subscribe(({\n        id\n      }) => this.editContract(id));\n    }\n\n    onFileChange(event) {\n      // const reader = new FileReader();\n      // if(event.target.files && event.target.files.length) {\n      //   const [file] = event.target.files;\n      //   reader.readAsDataURL(file);\n      //   reader.onload = () => {\n      //     this.pageForm.patchValue({\n      //       file: reader.result\n      //    });\n      //     // need to run CD since file load runs outside of zone\n      //     // this.cd.markForCheck();\n      //   };\n      // }\n      const fileSelected = event.target.files[0];\n      this.pageForm.patchValue({\n        file: fileSelected\n      });\n      this.verifyFile(fileSelected);\n      console.log('his.pageForm', this.pageForm);\n    }\n\n    onSubmit() {\n      console.log('onSubmit', this.pageForm.value);\n      this.loading = true;\n      this.pageForm.removeControl('partner');\n\n      if (this.pageForm.valid) {\n        if (this.pageForm.controls['file'].value) {\n          this.contractService.uploadFileAndSign(this.pageForm.controls['file'].value).subscribe(response => {\n            console.log({\n              response\n            });\n            const {\n              pdfSigned\n            } = response; // const saveFile = (data: any[], name: string) => {\n            //   let a = document.createElement('a');\n            //   document.body.appendChild(a);\n            //   const blob = new Blob(data, { type: 'octet/stream' });\n            //   const url = window.URL.createObjectURL(blob);\n            //   a.href = url;\n            //   a.download = name;\n            //   a.click();\n            //   window.URL.revokeObjectURL(url);\n            // };\n            // saveFile(pdfSigned.data, 'example.pdf');\n\n            console.log(`${response.docHash}.pdf`);\n            const filePdf = new File(pdfSigned.data, `${response.docHash}.pdf`);\n            this.contractService.uploadFileDirect(filePdf).subscribe(hashDOC => {\n              console.log({\n                hashDOC\n              });\n              this.saveContract(hashDOC);\n            });\n          });\n          return;\n          this.contractService.uploadFileDirect(this.pageForm.controls['file'].value).subscribe(response => {\n            console.log(response);\n            this.register = {\n              id: this.contractId || uuid(),\n              payload: JSON.stringify(this.pageForm.value)\n            };\n            this.parnerService.createRegister(this.pageForm.controls['parceiro'].value, this.register).subscribe(() => {\n              console.log('before');\n              this.wait(8000);\n              console.log('after w');\n              this.loading = false; // this.router\n              //   .navigateByUrl('/', { skipLocationChange: true })\n              //   .then(() => this.router.navigate(['list-register']));\n            });\n          });\n          return;\n          this.parnerService.uploadFile(this.pageForm.controls['file'].value).subscribe(response => {\n            var _a;\n\n            this.pageForm.removeControl('file'); //let lista = [response.toString()];\n\n            const base64 = this.arrayBufferToBase64(response.pdfSigned.data);\n            const urlPdf = 'data:application/pdf;base64,' + base64; // this.pageForm.controls['attachment_list'].setValue(lista);\n\n            const form = Object.assign(Object.assign({}, this.pageForm.value), {\n              docHash: response.docHash,\n              pdfSigned: (_a = response === null || response === void 0 ? void 0 : response.pdfSigned) === null || _a === void 0 ? void 0 : _a.data\n            }); //const buffer = Buffer.from();\n\n            const file = new Blob([JSON.stringify(response === null || response === void 0 ? void 0 : response.pdfSigned)], {\n              type: 'application/pdf'\n            });\n            const element = document.createElement('a');\n            const fileUrl = URL.createObjectURL(file);\n            element.setAttribute('href', urlPdf);\n            element.setAttribute('download', 'assinado.pdf');\n            element.style.display = 'none';\n            document.body.appendChild(element);\n            element.click(); //window.open(fileUrl);\n            // console.log(form);\n\n            /*\r\n                this.parnerService.createRegister(this.pageForm.controls['parceiro'], this.register).subscribe(() => {\r\n                  this.wait(10000);\r\n                  this.loading = false;\r\n                  this.router\r\n                    .navigateByUrl('/', { skipLocationChange: true })\r\n                    .then(() => this.router.navigate(['list-register']));\r\n                });*/\n          });\n        } else {\n          this.pageForm.removeControl('file'); // this.pageForm.removeControl('attachments');\n\n          this.saveContract();\n          return;\n          this.parnerService.createRegister(this.pageForm.controls['parceiro'].value, this.register).subscribe(() => {\n            console.log('beforeWait');\n            this.wait(8000);\n            console.log('afterWait');\n            this.loading = false;\n            this.router.navigateByUrl('/', {\n              skipLocationChange: true\n            }).then(() => this.router.navigate(['list-register']));\n          });\n        }\n      }\n    }\n\n    saveContract(hashDoc) {\n      console.log(JSON.parse(JSON.stringify(this.pageForm.value)));\n      this.pageForm.patchValue({\n        descricaoDocumento: undefined,\n        listaAssinaturas: undefined,\n        attachments: {\n          description: this.pageForm.get('descricaoDocumento').value,\n          signatureList: [...this.pageForm.get('listaAssinaturas').value]\n        }\n      });\n\n      if (hashDoc) {\n        this.pageForm.patchValue({\n          file: undefined,\n          attachments: {\n            hash: hashDoc,\n            description: this.pageForm.get('attachments.description').value,\n            signatureList: [...this.pageForm.get('attachments.signatureList').value]\n          }\n        });\n      }\n\n      console.log(JSON.parse(JSON.stringify(this.pageForm.value)));\n      this.register = {\n        id: this.contractId || uuid(),\n        payload: JSON.stringify(this.pageForm.value)\n      };\n      console.log(JSON.parse(JSON.stringify(this.register)));\n      this.parnerService.createRegister(this.pageForm.controls['parceiro'].value, this.register).subscribe(response => {\n        this.wait(3000);\n        console.log(response);\n        this.loading = false;\n        this.router.navigateByUrl('/page/contract');\n      }, error => {\n        this.loading = false;\n      });\n    }\n\n    uploadFileButton() {\n      console.log('button upload');\n      console.log('upload field', this.uploadFile);\n      this.uploadFile.nativeElement.click();\n    }\n\n    get showSignatureTable() {\n      return this.listSignatures.length > 0;\n    }\n\n    addContactSignture(signed = false) {\n      const newSignture = new SignatureContact(this.contactSignatureModel.name, this.contactSignatureModel.email);\n      newSignture.signed = signed;\n      this.listSignatures.push(newSignture);\n      this.dataSource = new MatTableDataSource(this.listSignatures);\n      this.resetDefaultSigntureContact();\n      this.contactForm.reset(); // this.signatureNameInput.nativeElement.focus();\n\n      this.pageForm.controls['listaAssinaturas'].patchValue(this.listSignatures);\n    }\n\n    resetDefaultSigntureContact() {\n      this.contactSignatureModel = new SignatureContact('', '');\n    }\n\n    removeSignture(element) {\n      console.log('removing...', element);\n      this.listSignatures.splice(this.listSignatures.findIndex(el => el.email === element.email), 1);\n      this.dataSource = new MatTableDataSource(this.listSignatures);\n    }\n\n    calculateTotal() {\n      this.pageForm.controls['total'].setValue(this.pageForm.controls['diaria'].value * this.pageForm.controls['vlr_diaria'].value);\n    } // onSubmit() {\n    //   this.pageForm.controls['total'].setValue(this.pageForm.controls['diaria'].value * this.pageForm.controls['vlr_diaria'].value);\n    //   if (this.contractId) {\n    //     this.register = {\n    //       id: this.contractId,\n    //       payload: JSON.stringify(this.pageForm.value)\n    //     };\n    //   } else {\n    //     this.register = {\n    //       id: uuid(),\n    //       payload: JSON.stringify(this.pageForm.value)\n    //     };\n    //   }\n    //   if (!this.file) {\n    //     this._snackBar.open('Informe o documento pdf', '', {\n    //       horizontalPosition: 'center',\n    //       verticalPosition: 'top',\n    //       duration: 5000\n    //     });\n    //     return;\n    //   }\n    //   this.parnerService.createRegister(this.pageForm.controls['parceiro'].value, this.register)\n    //     .subscribe(() => {\n    //       this.wait(9000);\n    //       this.router\n    //         .navigateByUrl('/', { skipLocationChange: true })\n    //         .then(() => this.router.navigate(['/page/contract']));\n    //     });\n    // }\n\n\n    wait(ms) {\n      var start = new Date().getTime();\n      var end = start;\n\n      while (end < start + ms) {\n        end = new Date().getTime();\n      }\n    }\n\n    verifyFile(file) {\n      // const file: File = files.item(0);\n      this.fileName = file && file.type === 'application/pdf' ? file.name : 'Selecione o documento';\n\n      if (file && file.name && file.type === 'application/pdf') {\n        this.file.append('file', file);\n      }\n\n      if (!file || file.type !== 'application/pdf') {\n        this.file = null;\n      }\n    }\n\n    arrayBufferToBase64(buffer) {\n      var binary = '';\n      var bytes = new Uint8Array(buffer);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n\n      return window.btoa(binary);\n    }\n\n    editContract(id) {\n      if (id) {\n        this.loading = true;\n        this.contractId = id;\n        this.pageTitle = 'Alterar contrato';\n        this.parnerService.getRegisterById(id).subscribe(data => {\n          console.log('getRegister', id, data);\n          var contract = data[0];\n          var obj = JSON.parse(contract.payload);\n          this.pageForm.patchValue({\n            //id: contract.id,\n            veiculo: obj.veiculo,\n            checkin: obj.checkin,\n            checkout: obj.checkout,\n            diaria: obj.diaria,\n            vlr_diaria: obj.vlr_diaria,\n            total: obj.total,\n            parceiro: obj.parceiro,\n            status: obj.status\n          });\n\n          if (obj.attachments) {\n            console.log('tem arquivo', obj.attachments);\n            this.pageForm.patchValue({\n              descricaoDocumento: obj.attachments.description\n            });\n\n            if (obj.attachments.signatureList) {\n              obj.attachments.signatureList.forEach(element => {\n                this.contactSignatureModel = new SignatureContact(element.name, element.email);\n                this.addContactSignture(element.signed);\n              });\n            }\n          }\n\n          this.parnerService.getRegisterHistById(this.contractId).subscribe(data => {\n            console.log('getHistory', data);\n            this.contractListHist = data;\n            this.loading = false;\n          });\n        });\n      }\n    }\n\n  }\n\n  ContractFormComponent.ɵfac = function ContractFormComponent_Factory(t) {\n    return new (t || ContractFormComponent)(i0.ɵɵdirectiveInject(i1.ContractService), i0.ɵɵdirectiveInject(i2.StatusService), i0.ɵɵdirectiveInject(i3.ParnerService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  ContractFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContractFormComponent,\n    selectors: [[\"app-contractNew\"]],\n    viewQuery: function ContractFormComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.uploadFile = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.signatureNameInput = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.contactForm = _t.first);\n      }\n    },\n    decls: 215,\n    vars: 14,\n    consts: [[1, \"page\"], [1, \"page-header\", \"clear\"], [\"novalidate\", \"\", 1, \"page-content\", 3, \"formGroup\", \"ngSubmit\"], [\"loginForm\", \"\", \"formElement\", \"ngForm\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"10px\", \"fxLayoutAlign\", \"start start\"], [\"fxFlex\", \"calc(40% - 10px)\", \"fxFlex.xs\", \"100\"], [\"type\", \"text\", \"matInput\", \"\", \"placeholder\", \"Ex: Sedan\", \"formControlName\", \"veiculo\", \"name\", \"veiculo\"], [\"fxFlex\", \"calc(15% - 10px)\", \"fxFlex.xs\", \"100\"], [\"type\", \"date\", \"matInput\", \"\", \"formControlName\", \"checkin\", \"name\", \"checkin\"], [\"type\", \"date\", \"matInput\", \"\", \"formControlName\", \"checkout\", \"name\", \"checkout\"], [\"type\", \"number\", \"min\", \"1\", \"matInput\", \"\", \"formControlName\", \"diaria\", \"name\", \"diaria\"], [\"type\", \"text\", \"matInput\", \"\", \"formControlName\", \"vlr_diaria\", \"name\", \"vlr_diaria\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"10px\", \"fxLayoutAlign\", \"space-evenly start\"], [\"fxFlex\", \"70\", \"fxFlex.xs\", \"100\"], [\"formControlName\", \"parceiro\", \"name\", \"parceiro\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"fxFlex\", \"15\", \"fxFlex.xs\", \"100\"], [\"type\", \"number\", \"readonly\", \"true\", \"matInput\", \"\", \"formControlName\", \"total\", \"name\", \"total\", 3, \"value\"], [\"formControlName\", \"status\", \"name\", \"status\"], [\"fxFlex\", \"40\", \"fxFlex.xs\", \"100\"], [1, \"form-upload\"], [\"type\", \"button\", \"mat-flat-button\", \"\", \"color\", \"primary\", 1, \"upload-button\", 3, \"click\"], [1, \"upload-filename\", 3, \"click\"], [\"type\", \"file\", \"name\", \"file\", \"id\", \"file\", 1, \"upload-input\", 3, \"change\"], [\"uploadFile\", \"\"], [\"matInput\", \"\", \"formControlName\", \"descricaoDocumento\", \"name\", \"descricaoDocumento\"], [\"fxFlex\", \"60\", \"fxFlex.xs\", \"100\"], [1, \"label-need-sign\"], [\"fxLayoutGap\", \"10px\", \"fxLayout\", \"row\", 3, \"ngSubmit\"], [\"contactForm\", \"ngForm\"], [\"fxFlex\", \"45\"], [\"type\", \"text\", \"matInput\", \"\", \"required\", \"\", \"name\", \"signatureName\", 3, \"ngModel\", \"ngModelChange\"], [\"signatureNameInput\", \"\"], [\"type\", \"email\", \"email\", \"\", \"matInput\", \"\", \"required\", \"\", \"name\", \"signatureEmail\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", \"mat-mini-fab\", \"\", \"color\", \"primary\", 3, \"disabled\"], [4, \"ngIf\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"end\", \"fxLayoutGap\", \"10px\", 1, \"footer\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"routerLink\"], [\"type\", \"submit\", \"mat-flat-button\", \"\", \"color\", \"primary\"], [\"class\", \"page page-timeline\", 4, \"ngIf\"], [3, \"isLoading\"], [3, \"value\"], [\"mat-table\", \"\", 1, \"table\", 3, \"dataSource\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"email\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"type\", \"button\", \"mat-icon-button\", \"\", \"color\", \"basic\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"page\", \"page-timeline\"], [3, \"data\"]],\n    template: function ContractFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1, \"\\n  \");\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtext(3, \"\\n    \");\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(6, \"\\n  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(7, \"\\n  \");\n        i0.ɵɵelementStart(8, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function ContractFormComponent_Template_form_ngSubmit_8_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(11, \"\\n    \");\n        i0.ɵɵelementStart(12, \"div\", 4);\n        i0.ɵɵtext(13, \"\\n      \");\n        i0.ɵɵelementStart(14, \"div\", 5);\n        i0.ɵɵtext(15, \"\\n        \");\n        i0.ɵɵelementStart(16, \"mat-form-field\");\n        i0.ɵɵtext(17, \"\\n          \");\n        i0.ɵɵelementStart(18, \"mat-label\");\n        i0.ɵɵtext(19, \"Ve\\u00EDculo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(20, \"\\n          \");\n        i0.ɵɵelement(21, \"input\", 6);\n        i0.ɵɵtext(22, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(24, \"\\n\\n      \");\n        i0.ɵɵelementStart(25, \"div\", 7);\n        i0.ɵɵtext(26, \"\\n        \");\n        i0.ɵɵelementStart(27, \"mat-form-field\");\n        i0.ɵɵtext(28, \"\\n          \");\n        i0.ɵɵelementStart(29, \"mat-label\");\n        i0.ɵɵtext(30, \"Check-In\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(31, \"\\n          \");\n        i0.ɵɵelement(32, \"input\", 8);\n        i0.ɵɵtext(33, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(34, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(35, \"\\n      \");\n        i0.ɵɵelementStart(36, \"div\", 7);\n        i0.ɵɵtext(37, \"\\n        \");\n        i0.ɵɵelementStart(38, \"mat-form-field\");\n        i0.ɵɵtext(39, \"\\n          \");\n        i0.ɵɵelementStart(40, \"mat-label\");\n        i0.ɵɵtext(41, \"Check-Out\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(42, \"\\n          \");\n        i0.ɵɵelement(43, \"input\", 9);\n        i0.ɵɵtext(44, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(45, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(46, \"\\n      \");\n        i0.ɵɵelementStart(47, \"div\", 7);\n        i0.ɵɵtext(48, \"\\n        \");\n        i0.ɵɵelementStart(49, \"mat-form-field\");\n        i0.ɵɵtext(50, \"\\n          \");\n        i0.ɵɵelementStart(51, \"mat-label\");\n        i0.ɵɵtext(52, \"Qtd. Di\\u00E1rias\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(53, \"\\n          \");\n        i0.ɵɵelement(54, \"input\", 10);\n        i0.ɵɵtext(55, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(56, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(57, \"\\n      \");\n        i0.ɵɵelementStart(58, \"div\", 7);\n        i0.ɵɵtext(59, \"\\n        \");\n        i0.ɵɵelementStart(60, \"mat-form-field\");\n        i0.ɵɵtext(61, \"\\n          \");\n        i0.ɵɵelementStart(62, \"mat-label\");\n        i0.ɵɵtext(63, \"Valor di\\u00E1ria\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(64, \"\\n          \");\n        i0.ɵɵelement(65, \"input\", 11);\n        i0.ɵɵtext(66, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(67, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(68, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(69, \"\\n    \");\n        i0.ɵɵelementStart(70, \"div\", 12);\n        i0.ɵɵtext(71, \"\\n      \");\n        i0.ɵɵelementStart(72, \"div\", 13);\n        i0.ɵɵtext(73, \"\\n        \");\n        i0.ɵɵelementStart(74, \"mat-form-field\");\n        i0.ɵɵtext(75, \"\\n          \");\n        i0.ɵɵelementStart(76, \"mat-label\");\n        i0.ɵɵtext(77, \"Parceiro\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(78, \"\\n          \");\n        i0.ɵɵelementStart(79, \"mat-select\", 14);\n        i0.ɵɵtext(80, \"\\n            \");\n        i0.ɵɵelementStart(81, \"mat-option\");\n        i0.ɵɵtext(82, \"Selecione\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(83, \"\\n            \");\n        i0.ɵɵtemplate(84, ContractFormComponent_mat_option_84_Template, 2, 2, \"mat-option\", 15);\n        i0.ɵɵtext(85, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(86, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(87, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(88, \"\\n      \");\n        i0.ɵɵelementStart(89, \"div\", 16);\n        i0.ɵɵtext(90, \"\\n        \");\n        i0.ɵɵelementStart(91, \"mat-form-field\");\n        i0.ɵɵtext(92, \"\\n          \");\n        i0.ɵɵelementStart(93, \"mat-label\");\n        i0.ɵɵtext(94, \"Valor total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(95, \"\\n          \");\n        i0.ɵɵelement(96, \"input\", 17);\n        i0.ɵɵtext(97, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(98, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(99, \"\\n      \");\n        i0.ɵɵelementStart(100, \"div\", 16);\n        i0.ɵɵtext(101, \"\\n        \");\n        i0.ɵɵelementStart(102, \"mat-form-field\");\n        i0.ɵɵtext(103, \"\\n          \");\n        i0.ɵɵelementStart(104, \"mat-label\");\n        i0.ɵɵtext(105, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(106, \"\\n          \");\n        i0.ɵɵelementStart(107, \"mat-select\", 18);\n        i0.ɵɵtext(108, \"\\n            \");\n        i0.ɵɵelementStart(109, \"mat-option\");\n        i0.ɵɵtext(110, \"Selecione\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(111, \"\\n            \");\n        i0.ɵɵtemplate(112, ContractFormComponent_mat_option_112_Template, 2, 2, \"mat-option\", 15);\n        i0.ɵɵtext(113, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(114, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(115, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(116, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(117, \"\\n    \");\n        i0.ɵɵtext(118, \"\\n    \");\n        i0.ɵɵelementStart(119, \"div\", 12);\n        i0.ɵɵtext(120, \"\\n      \");\n        i0.ɵɵelementStart(121, \"div\", 19);\n        i0.ɵɵtext(122, \"\\n        \");\n        i0.ɵɵelementStart(123, \"div\", 20);\n        i0.ɵɵtext(124, \"\\n          \");\n        i0.ɵɵelementStart(125, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function ContractFormComponent_Template_button_click_125_listener() {\n          return ctx.uploadFileButton();\n        });\n        i0.ɵɵtext(126, \"\\n            Upload de Contrato\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(127, \"\\n          \");\n        i0.ɵɵelementStart(128, \"label\", 22);\n        i0.ɵɵlistener(\"click\", function ContractFormComponent_Template_label_click_128_listener() {\n          return ctx.uploadFileButton();\n        });\n        i0.ɵɵtext(129);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(130, \"\\n          \");\n        i0.ɵɵelementStart(131, \"input\", 23, 24);\n        i0.ɵɵlistener(\"change\", function ContractFormComponent_Template_input_change_131_listener($event) {\n          return ctx.onFileChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(133, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(134, \"\\n        \");\n        i0.ɵɵelementStart(135, \"mat-form-field\");\n        i0.ɵɵtext(136, \"\\n          \");\n        i0.ɵɵelementStart(137, \"mat-label\");\n        i0.ɵɵtext(138, \"Descri\\u00E7\\u00E3o do Documento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(139, \"\\n          \");\n        i0.ɵɵelement(140, \"textarea\", 25);\n        i0.ɵɵtext(141, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(142, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(143, \"\\n      \");\n        i0.ɵɵelementStart(144, \"div\", 26);\n        i0.ɵɵtext(145, \"\\n        \");\n        i0.ɵɵelementStart(146, \"p\", 27);\n        i0.ɵɵtext(147, \"Lista de assinaturas:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(148, \"\\n\\n        \");\n        i0.ɵɵelementStart(149, \"form\", 28, 29);\n        i0.ɵɵlistener(\"ngSubmit\", function ContractFormComponent_Template_form_ngSubmit_149_listener() {\n          return ctx.addContactSignture();\n        });\n        i0.ɵɵtext(151, \"\\n          \");\n        i0.ɵɵelementStart(152, \"div\", 30);\n        i0.ɵɵtext(153, \"\\n            \");\n        i0.ɵɵelementStart(154, \"mat-form-field\");\n        i0.ɵɵtext(155, \"\\n              \");\n        i0.ɵɵelementStart(156, \"mat-label\");\n        i0.ɵɵtext(157, \"Nome\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(158, \"\\n              \");\n        i0.ɵɵelementStart(159, \"input\", 31, 32);\n        i0.ɵɵlistener(\"ngModelChange\", function ContractFormComponent_Template_input_ngModelChange_159_listener($event) {\n          return ctx.contactSignatureModel.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(161, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(162, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(163, \"\\n          \");\n        i0.ɵɵelementStart(164, \"div\", 30);\n        i0.ɵɵtext(165, \"\\n            \");\n        i0.ɵɵelementStart(166, \"mat-form-field\");\n        i0.ɵɵtext(167, \"\\n              \");\n        i0.ɵɵelementStart(168, \"mat-label\");\n        i0.ɵɵtext(169, \"E-mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(170, \"\\n              \");\n        i0.ɵɵelementStart(171, \"input\", 33);\n        i0.ɵɵlistener(\"ngModelChange\", function ContractFormComponent_Template_input_ngModelChange_171_listener($event) {\n          return ctx.contactSignatureModel.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(172, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(173, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(174, \"\\n          \");\n        i0.ɵɵelementStart(175, \"div\");\n        i0.ɵɵtext(176, \"\\n            \");\n        i0.ɵɵelementStart(177, \"button\", 34);\n        i0.ɵɵtext(178, \"\\n              \");\n        i0.ɵɵelementStart(179, \"mat-icon\");\n        i0.ɵɵtext(180, \"add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(181, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(182, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(183, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(184, \"\\n        \");\n        i0.ɵɵtemplate(185, ContractFormComponent_div_185_Template, 30, 3, \"div\", 35);\n        i0.ɵɵtext(186, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(187, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(188, \"\\n    \");\n        i0.ɵɵelementStart(189, \"footer\", 36);\n        i0.ɵɵtext(190, \"\\n      \");\n        i0.ɵɵelementStart(191, \"div\");\n        i0.ɵɵtext(192, \"\\n        \");\n        i0.ɵɵelementStart(193, \"a\", 37);\n        i0.ɵɵtext(194, \"\\n          \");\n        i0.ɵɵelementStart(195, \"mat-icon\");\n        i0.ɵɵtext(196, \"arrow_back_ios\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(197, \" Voltar\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(198, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(199, \"\\n      \");\n        i0.ɵɵelementStart(200, \"div\");\n        i0.ɵɵtext(201, \"\\n        \");\n        i0.ɵɵelementStart(202, \"button\", 38);\n        i0.ɵɵelementStart(203, \"mat-icon\");\n        i0.ɵɵtext(204, \"done\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(205, \" Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(206, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(207, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(208, \"\\n  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(209, \"\\n\\n  \");\n        i0.ɵɵtemplate(210, ContractFormComponent_div_210_Template, 7, 1, \"div\", 39);\n        i0.ɵɵtext(211, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(212, \"\\n\");\n        i0.ɵɵelement(213, \"app-loader\", 40);\n        i0.ɵɵtext(214, \"\\n\");\n      }\n\n      if (rf & 2) {\n        const _r5 = i0.ɵɵreference(150);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.pageTitle);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.pageForm);\n        i0.ɵɵadvance(76);\n        i0.ɵɵproperty(\"ngForOf\", ctx.parnerList);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"value\", (ctx.pageForm.get(\"diaria\").value || 0) * (ctx.pageForm.get(\"vlr_diaria\").value || 0));\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngForOf\", ctx.statusList);\n        i0.ɵɵadvance(17);\n        i0.ɵɵtextInterpolate(ctx.fileName);\n        i0.ɵɵadvance(30);\n        i0.ɵɵproperty(\"ngModel\", ctx.contactSignatureModel.name);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngModel\", ctx.contactSignatureModel.email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"disabled\", !_r5.form.valid);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.showSignatureTable);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(13, _c3));\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngIf\", ctx.contractId);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"isLoading\", ctx.loading);\n      }\n    },\n    styles: [\".mat-header-cell{color:#414141;font-size:14px;font-weight:700}.page[_ngcontent-%COMP%]   .page-timeline[_ngcontent-%COMP%]{width:100%}.mat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%]{text-align:left}.form-upload[_ngcontent-%COMP%]{padding-bottom:1.25rem}.form-upload[_ngcontent-%COMP%]   .upload-input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.form-upload[_ngcontent-%COMP%]   .upload-filename[_ngcontent-%COMP%]{margin-left:1rem}.label-need-sign[_ngcontent-%COMP%]{margin-bottom:.75rem}.table[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]   .mat-column-name[_ngcontent-%COMP%]{width:200px}.table[_ngcontent-%COMP%]   .mat-column-action[_ngcontent-%COMP%]{width:20px}.footer[_ngcontent-%COMP%]{margin-top:20px;border-top:1px solid #e0e0e0;padding-top:20px}\"]\n  });\n  return ContractFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}